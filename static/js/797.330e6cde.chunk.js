"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[797],{7947:function(e,t,n){function r(e){return"".concat("https://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}n.d(t,{Z:function(){return r}})},6524:function(e,t,n){var r=n(5671),i=n(3144),a=n(136),s=n(2882),o=n(2791),l=n(8983),c=n(184),u=function(e){(0,a.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,c.jsx)(l.LQ,{})}}]),n}(o.Component);t.Z=u},3797:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(5785),i=n(5671),a=n(3144),s=n(136),o=n(2882),l=n(2791),c=n(8983),u=n(4846),d=n(511),p=n(2800),h=n(7947),f=n(2426),x=n.n(f),m=n(6524),g=n(184),j=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;(0,i.Z)(this,n),(r=t.call(this,e)).pagination=function(e){for(var t=[],n=1;n<=e;n++)t.push(n);r.setState({pagination:t})},r.getExpenseData=function(e,t){r.setLoading(!0);var n=r.state.month;fetch((0,h.Z)("expense/page/".concat(n,"/").concat(e)),{method:"GET"}).then((function(n){if(n.ok)return n.json().then((function(n){r.setState({expense:n.expense,pageList:e,pageNumber:t,totalPage:n.pagination.totalPages}),r.pagination(n.pagination.totalPages),r.setLoading(!1)}))}))},r.cancelFormModal=function(){r.setFormModalState(!1),r.clearFields(),r.setError()},r.setOffset=function(e){r.setState({offset:e})},r.setLimit=function(e){r.setState({limit:e})};var a=e.match;return r.state={month:a&&a.params&&a.params.month,formModalState:!1,deleteModalState:!1,loading:!0,expense:null,error:"",role:"",pagination:[],totalPage:0,pageList:1,pageNumber:10,id:0,offset:0,limit:0},r}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){if(sessionStorage.getItem("user")){var e=JSON.parse(sessionStorage.getItem("user"));this.setRole(e.role_id.entitled)}this.getExpenseData(1)}},{key:"deleteexpense",value:function(){var e=this;fetch((0,h.Z)("expense/".concat(this.state.expense[this.state.id].id)),{method:"DELETE"}).then((function(t){if(t.ok){var n=(0,r.Z)(e.state.expense);n.splice(e.state.id,1),e.setState({expense:n}),e.setDeleteModalState(!1)}}))}},{key:"expenseToDelete",value:function(e){this.setId(e),this.setDeleteModalState(!0)}},{key:"expenseUpdate",value:function(e){this.props.history.push("/expense/update/"+e)}},{key:"return",value:function(){this.props.history.push("/expense/list")}},{key:"render",value:function(){var e=this,t=this.state,n=t.expense,r=t.loading,i=t.role,a=t.deleteModalState,s=t.id,o=t.pageList,l=t.pageNumber,h=t.pagination,f=t.totalPage;return r?(0,g.jsx)(m.Z,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.rb,{children:(0,g.jsx)(c.b7,{xs:12,children:(0,g.jsxs)(c.xH,{className:"mb-4",children:[(0,g.jsx)(c.bn,{children:(0,g.jsxs)("span",{className:"d-grid gap-2 d-md-flex justify-content-between",children:[(0,g.jsx)("strong",{children:"Liste des Sorties"}),(0,g.jsx)(c.u5,{color:"primary",onClick:function(){return e.return()},children:"Retour"})]})}),(0,g.jsxs)(c.sl,{children:[(0,g.jsxs)(c.Sx,{children:[(0,g.jsx)(c.V,{children:(0,g.jsxs)(c.T6,{children:[(0,g.jsx)(c.is,{scope:"col",children:"created_date"}),(0,g.jsx)(c.is,{scope:"col",children:"libelle"}),(0,g.jsx)(c.is,{scope:"col",children:"Utilisateur"}),(0,g.jsx)(c.is,{scope:"col",children:"Price"})]})}),(0,g.jsx)(c.NR,{children:n&&n.map((function(t,n){return(0,g.jsxs)(c.T6,{children:[(0,g.jsx)(c.NN,{children:x()(t.created_date).format("YYYY-MM-DD HH:mm:ss")}),(0,g.jsx)(c.NN,{children:t.libelle}),(0,g.jsxs)(c.NN,{children:[t.name," ",t.surname]}),(0,g.jsx)(c.NN,{children:t.price>1e3?(0,g.jsxs)(g.Fragment,{children:[t.price.toLocaleString()," Ar"]}):(0,g.jsxs)(g.Fragment,{children:[t.price," Ar"]})}),"Administrateur"===i?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.NN,{children:(0,g.jsx)(c.u5,{color:"light",onClick:function(){return e.expenseUpdate(t.id)},children:(0,g.jsx)(u.Z,{icon:d.l})})}),(0,g.jsx)(c.NN,{children:(0,g.jsx)(c.u5,{color:"danger",onClick:function(){return e.expenseToDelete(n)},children:(0,g.jsx)(u.Z,{icon:p.N})})})]}):(0,g.jsx)(g.Fragment,{})]},n)}))})]}),(0,g.jsxs)(c.E7,{"aria-label":"Page navigation example",children:[(0,g.jsx)(c.tn,{"aria-label":"Previous",disabled:1===o,onClick:function(){return e.getExpenseData(o-1,l)},children:(0,g.jsx)("span",{"aria-hidden":"true",children:"\xab"})}),h.map((function(t,n){return(0,g.jsx)(c.tn,{active:t===o,onClick:function(){return e.getExpenseData(t,l)},children:" ".concat(t," ")},n)})),(0,g.jsx)(c.tn,{"aria-label":"Next",disabled:f-o===0||n&&0===n.length,onClick:function(){return e.getExpenseData(o+1,l)},children:(0,g.jsx)("span",{"aria-hidden":"true",children:" \xbb "})})]})]})]})})}),(0,g.jsxs)(c.Tk,{alignment:"center",visible:a,onClose:function(){return e.setDeleteModalState(!1)},children:[(0,g.jsx)(c.p0,{children:(0,g.jsx)(c.fl,{children:"Supprimer"})}),(0,g.jsx)(c.sD,{children:(0,g.jsxs)("p",{children:["Voulez vous supprimer"," ",n&&n.length>0&&s<n.length&&n[s].libelle,"?"]})}),(0,g.jsxs)(c.Ym,{children:[(0,g.jsx)(c.u5,{color:"secondary",onClick:function(){return e.setDeleteModalState(!1)},children:"Annuler"}),(0,g.jsx)(c.u5,{color:"danger",onClick:function(){return e.deleteexpense()},children:"Supprimer"})]})]})]})}},{key:"setRole",value:function(e){this.setState({role:e})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setId",value:function(e){this.setState({id:e})}},{key:"setDeleteModalState",value:function(e){this.setState({deleteModalState:e})}}]),n}(l.Component)},511:function(e,t,n){n.d(t,{l:function(){return r}});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]},2800:function(e,t,n){n.d(t,{N:function(){return r}});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]},5785:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=797.330e6cde.chunk.js.map