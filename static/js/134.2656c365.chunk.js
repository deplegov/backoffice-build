"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[134],{7947:function(e,t,s){function n(e){return"".concat("http://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}s.d(t,{Z:function(){return n}})},6524:function(e,t,s){var n=s(5671),a=s(3144),r=s(136),o=s(2882),i=s(2791),c=s(8983),u=s(184),d=function(e){(0,r.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,a.Z)(s,[{key:"render",value:function(){return(0,u.jsx)(c.LQ,{})}}]),s}(i.Component);t.Z=d},7134:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var n=s(5671),a=s(3144),r=s(136),o=s(2882),i=s(2791),c=s(8983),u=s(7947),d=s(6524),l=s(184),p=function(e){(0,r.Z)(s,e);var t=(0,o.Z)(s);function s(e){var a;(0,n.Z)(this,s),(a=t.call(this,e)).updatePass=function(){var e=a.state.new_pass;if(e!==a.state.conf_pass)a.setButton(!0),a.setError("Mot de passe non identique");else{a.setLoad(!0);var t={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:a.state.username,password:a.state.precedent_pass,new_pass:e})};fetch((0,u.Z)("users/updatePass"),t).then((function(e){e.ok?(e.json().then((function(e){})),a.setLoad(!1),a.props.history.push("/Home")):(a.setLoad(!1),e.json().then((function(e){console.log(e),a.setState({error:"Ancien mot de passe incorrect"})})))}))}},a.setError=function(e){a.setState({error:e})},a.setButton=function(e){a.setState({button:e})},a.setPrecedent=function(e){a.setState({precedent_pass:e.target.value})},a.setNew=function(e){e.target.value.length<=8?a.setError("Mot de passe trop court"):a.setError(""),a.setState({new_pass:e.target.value})},a.setConfirmation=function(e){e.target.value!==a.state.new_pass?a.setError("Mot de passe non identique"):(a.setButton(!1),a.setError("")),a.setState({conf_pass:e.target.value})};var r=e.match;return a.state={user_id:r&&r.params&&r.params.id,username:"",precedent_pass:"",new_pass:"",conf_pass:"",ready:!1,error:"",button:!0,load:!1},a}return(0,a.Z)(s,[{key:"componentDidMount",value:function(){this.getUser()}},{key:"getUser",value:function(){var e=this;this.setReady(!1),fetch((0,u.Z)("users/".concat(this.state.user_id)),{method:"GET"}).then((function(t){t.ok&&t.json().then((function(t){t&&e.setState({username:t.user.username,ready:!0})}))}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.ready,n=t.precedent_pass,a=t.new_pass,r=t.conf_pass,o=t.error,i=t.load,u=t.button;return(0,l.jsx)("div",{className:"bg-light min-vh-50 d-flex flex-row align-items-center",children:s?(0,l.jsxs)(c.KB,{children:[" ",(0,l.jsx)(c.rb,{className:"justify-content-center",children:(0,l.jsx)(c.b7,{md:9,lg:9,xl:6,children:(0,l.jsx)(c.xH,{className:"mx-4",children:(0,l.jsx)(c.sl,{className:"p-4",children:(0,l.jsxs)(c.lx,{onSubmit:function(e){e.preventDefault()},children:[(0,l.jsx)("h1",{children:"Modification mot de passe"}),(0,l.jsxs)(c.YR,{className:"mb-3",children:[(0,l.jsx)(c.wV,{children:"Ancien mot de passe"}),(0,l.jsx)(c.jO,{type:"password",placeholder:n,autoComplete:"Ancien",value:n,onChange:this.setPrecedent})]}),(0,l.jsxs)(c.YR,{className:"mb-3",children:[(0,l.jsx)(c.wV,{children:"Nouveau"}),(0,l.jsx)(c.jO,{type:"password",placeholder:a,autoComplete:"Nouveau",value:a,onChange:this.setNew})]}),(0,l.jsxs)(c.YR,{className:"mb-3",children:[(0,l.jsx)(c.wV,{children:"Confirmation"}),(0,l.jsx)(c.jO,{type:"password",placeholder:r,autoComplete:"Confirmation",value:r,onChange:this.setConfirmation})]}),(0,l.jsxs)("div",{className:"d-grid",children:[i?(0,l.jsx)(c.u5,{id:"aim-color-green",className:"px-4",disabled:!0,children:(0,l.jsx)(d.Z,{})}):(0,l.jsx)(c.u5,{color:"success",type:"submit",onClick:function(){return e.updatePass()},disabled:u,children:"Modifier"}),(0,l.jsx)("label",{children:o})]})]})})})})})]}):(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(d.Z,{})})})}},{key:"setLoad",value:function(e){this.setState({load:e})}},{key:"setReady",value:function(e){this.setState({ready:e})}}]),s}(i.Component)}}]);
//# sourceMappingURL=134.2656c365.chunk.js.map