{"version":3,"file":"static/js/24.368d44d8.chunk.js","mappings":"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","sources":["const/api.js","views/pages/Loading.js","views/pages/login/Login.js","../node_modules/@coreui/icons/js/free/cil-lock-locked.js"],"sourcesContent":["export default function api(link) {\r\n  return `${process.env.REACT_APP_BACKEND_HOST}/${link}`;\r\n}\r\n","import React from \"react\";\r\nimport { CSpinner } from \"@coreui/react\";\r\nclass Loading extends React.Component {\r\n  render() {\r\n    return <CSpinner />;\r\n  }\r\n}\r\nexport default Loading;\r\n","import React, { Component } from \"react\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCardGroup,\r\n  CCol,\r\n  CContainer,\r\n  CForm,\r\n  CFormInput,\r\n  CInputGroup,\r\n  CInputGroupText,\r\n  CRow,\r\n} from \"@coreui/react\";\r\nimport CIcon from \"@coreui/icons-react\";\r\nimport { cilLockLocked, cilUser } from \"@coreui/icons\";\r\nimport api from \"../../../const/api\";\r\nimport Loading from \"../Loading\";\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"luc.rabe@gmail.com\",\r\n      password: \"mdpprom13\",\r\n      error: \"\",\r\n      loading: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (sessionStorage.getItem(\"user\")) {\r\n      window.location.replace(\"/statistique/global\");\r\n    }\r\n  }\r\n\r\n  onChangeUserName = (e) => {\r\n    this.setState({\r\n      username: e.target.value,\r\n    });\r\n  };\r\n\r\n  onChangepassword = (e) => {\r\n    this.setState({\r\n      password: e.target.value,\r\n    });\r\n  };\r\n\r\n  setLoad(load) {\r\n    this.setState({\r\n      loading: load,\r\n    });\r\n  }\r\n\r\n  loginFunction = (event) => {\r\n    this.setLoad(true);\r\n    const option = {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      method: \"POST\",\r\n      body: JSON.stringify({\r\n        email: this.state.username,\r\n        password: this.state.password,\r\n      }),\r\n    };\r\n    fetch(api(\"users/login\"), option).then((res) => {\r\n      if (res.ok) {\r\n        res.json().then((data) => {\r\n          // sessionStorage.setItem(\"token\", data.token);\r\n          sessionStorage.setItem(\"user\", JSON.stringify(data.user));\r\n          this.props.history.push(\"/statistique/global\");\r\n        });\r\n        this.setLoad(false);\r\n      } else {\r\n        this.setLoad(false);\r\n        res.json().then((res) => {\r\n          // console.log(res.message);\r\n          this.setState({\r\n            error: \"mot de passe ou nom d'utilisateur incorrect\",\r\n          });\r\n        });\r\n      }\r\n    });\r\n    // this.props.history.push(\"/statistique/global\");\r\n  };\r\n  render() {\r\n    const { loading } = this.state;\r\n    return (\r\n      <div className=\"bg-light min-vh-100 d-flex flex-row align-items-center\">\r\n        <CContainer>\r\n          <CRow className=\"justify-content-center\">\r\n            <CCol md={8}>\r\n              <CCardGroup>\r\n                <CCard className=\"p-4\">\r\n                  <CCardBody>\r\n                    <CForm onSubmit={this.loginFunction}>\r\n                      <h1>Login</h1>\r\n                      <p className=\"text-medium-emphasis\">\r\n                        Se connecter Ã  votre compte\r\n                      </p>\r\n                      <CInputGroup className=\"mb-3\">\r\n                        <CInputGroupText>\r\n                          <CIcon icon={cilUser} />\r\n                        </CInputGroupText>\r\n                        <CFormInput\r\n                          placeholder=\"Nom d'utilisateur\"\r\n                          autoComplete=\"Nom d'utilisateur\"\r\n                          value={this.state.username}\r\n                          onChange={this.onChangeUserName}\r\n                        />\r\n                      </CInputGroup>\r\n                      <CInputGroup className=\"mb-4\">\r\n                        <CInputGroupText>\r\n                          <CIcon icon={cilLockLocked} />\r\n                        </CInputGroupText>\r\n                        <CFormInput\r\n                          type=\"password\"\r\n                          placeholder=\"Mot de passe\"\r\n                          autoComplete=\"current-password\"\r\n                          value={this.state.password}\r\n                          onChange={this.onChangepassword}\r\n                        />\r\n                      </CInputGroup>\r\n                      <CRow>\r\n                        <center>\r\n                          <p> {this.state.error} </p>{\" \"}\r\n                        </center>\r\n                        <center>\r\n                          {\" \"}\r\n                          {loading ? (\r\n                            <CButton\r\n                              id=\"aim-color-green\"\r\n                              className=\"px-4\"\r\n                              disabled\r\n                            >\r\n                              <Loading></Loading>\r\n                            </CButton>\r\n                          ) : (\r\n                            <CButton\r\n                              id=\"aim-color-green\"\r\n                              className=\"px-4\"\r\n                              type=\"submit\"\r\n                              onClick={this.loginFunction}\r\n                            >\r\n                              Se connecter\r\n                            </CButton>\r\n                          )}\r\n                        </center>\r\n                      </CRow>\r\n                    </CForm>\r\n                  </CCardBody>\r\n                </CCard>\r\n              </CCardGroup>\r\n            </CCol>\r\n          </CRow>\r\n        </CContainer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export const cilLockLocked = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>\"]"],"names":["api","link","process","Loading","React","Login","props","onChangeUserName","e","setState","username","target","value","onChangepassword","password","loginFunction","event","setLoad","option","headers","method","body","JSON","stringify","email","state","fetch","then","res","ok","json","data","sessionStorage","setItem","user","history","push","error","loading","getItem","window","location","replace","load","this","className","md","onSubmit","icon","cilUser","placeholder","autoComplete","onChange","cilLockLocked","type","id","disabled","onClick","Component"],"sourceRoot":""}