{"version":3,"file":"static/js/253.bcd7f403.chunk.js","mappings":"0LAAaA,EAA0B,CAAC,UAAU,sc,iDCM5CC,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,EAAAA,MAAAA,KAAAA,WAgBH,OAhBGA,EAAAA,EAAAA,GAAAA,EAAAA,CAAAA,CAAAA,IAAAA,SAAAA,MAEJ,SAAOC,GACLC,KAAKC,MAAMC,QAAQC,KAAKJ,KACzB,oBAED,WAAU,IAAD,OACP,OACE,UAAC,KAAD,CACEK,QAAS,kBAAM,EAAKC,OAAO,EAAKJ,MAAMF,KACtCO,MAAM,QACNC,MAAO,CAAEC,MAAO,QAASC,aAAc,QAHzC,WAKE,SAAC,IAAD,CAAOC,KAAMb,IALf,iBAQH,EAhBGC,CAAmBa,EAAAA,WAmBzB,GAAeC,EAAAA,EAAAA,IAAWd,I,qBCzBX,SAASe,EAAIC,GAC1B,MAAM,GAAN,OAAUC,oDAAV,YAAgDD,G,8HCC5CE,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GAAAA,SAAAA,IAAAA,OAAAA,EAAAA,EAAAA,GAAAA,KAAAA,GAAAA,EAAAA,MAAAA,KAAAA,WAGH,OAHGA,EAAAA,EAAAA,GAAAA,EAAAA,CAAAA,CAAAA,IAAAA,SAAAA,MACJ,WACE,OAAO,SAAC,KAAD,QACR,EAHGA,CAAgBC,EAAAA,WAKtB,O,uKCUqBC,EAAAA,SAAAA,IAAAA,EAAAA,EAAAA,GAAAA,EAAAA,GAAAA,IAAAA,GAAAA,EAAAA,EAAAA,GAAAA,GACnB,WAAYjB,GAAQ,IAAD,mBACjB,cAAMA,IAsNRkB,QAAU,SAACC,GACT,EAAKC,SAAS,CACZC,KAAMF,EAAEG,OAAOC,SAzNA,EA4NnBC,WAAa,SAACL,GACZ,EAAKC,SAAS,CACZK,QAASN,EAAEG,OAAOC,SA9NH,EAiOnBG,UAAY,SAACP,GACX,EAAKC,SAAS,CACZO,OAAQR,EAAEG,OAAOC,SAnOF,EAsOnBK,WAAa,SAACT,GACZ,EAAKC,SAAS,CACZS,QAASV,EAAEG,OAAOC,SAxOH,EA2OnBO,eAAiB,SAACX,GAChB,EAAKC,SAAS,CACZW,aAAcZ,EAAEG,OAAOC,SA7OR,EAgPnBS,SAAW,SAACb,GACV,EAAKC,SAAS,CACZa,MAAOd,EAAEG,OAAOC,SAlPD,EAgQnBW,SAAW,SAACC,GACV,EAAKf,SAAS,CACZgB,MAAOD,KAlQQ,EAsQnBE,YAAc,SAAClB,GACb,EAAKC,SAAS,CACZkB,SAAUnB,EAAEG,OAAOC,SAxQJ,EA4QnBgB,UAAY,SAACpB,GACX,EAAKC,SAAS,CACZoB,QAASrB,EAAEG,OAAOC,SA5QpB,IAAQkB,EAAUzC,EAAVyC,MAFS,OAGjB,EAAKC,MAAQ,CACXC,QAASF,GAASA,EAAMG,QAAUH,EAAMG,OAAOC,GAC/CL,QAAS,KACTM,KAAM,KACNC,KAAM,KACNC,OAAO,EACPZ,MAAO,GACPa,MAAM,GAVS,EA8PlB,OAlPA,yCAED,WAGE,IAAMC,EAAW,CACfL,GAAI,EACJxB,KAAM,OACNI,QAAS,UACTE,OAAQ,IACRE,QAAS,OACTE,aAAc,YACdE,MAAO,mBACPkB,UAAW,UACXX,QAAS,GAgBXzC,KAAKqB,SAAS,CACZ2B,KAAMG,EACNV,QAASU,EAASV,QAClBM,KAjBe,CACf,CACED,GAAI,EACJO,SAAU,QACVC,YAAa,qBACbC,OAAQ,CAAC,oBAAqB,8BAEhC,CACET,GAAI,EACJO,SAAU,QACVC,YAAa,mBACbC,OAAQ,CAAC,UAOXN,OAAO,MAEV,qBAED,WAAW,IAAD,OACRjD,KAAKwD,UAAS,GACdC,OAAM5C,EAAAA,EAAAA,GAAI,SAAD,OAAUb,KAAK2C,MAAMC,UAAY,CAAEc,OAAQ,QAASC,MAAK,SAACC,GAC7DA,EAAIC,IACND,EAAIE,OAAOH,MAAK,SAACI,GACXA,IACF,EAAK1C,SAAS,CACZ2B,KAAMe,EAAKf,KACXP,QAASsB,EAAKf,KAAKP,QAAQK,GAC3BG,OAAO,IAEe,OAApBc,EAAKf,KAAKd,OACZ,EAAKb,SAAS,CAAEa,MAAO,cAKlC,qBAED,WAAW,IAAD,OACRlC,KAAKgE,SAAQ,GACbP,OAAM5C,EAAAA,EAAAA,GAAI,SAAS8C,MAAK,SAACC,GACnBA,EAAIC,IACND,EAAIE,OAAOH,MAAK,SAACI,GACXA,GAAQA,EAAKE,OACf,EAAK5C,SAAS,CACZ0B,KAAMgB,EAAKE,cAIrBjE,KAAKgE,SAAQ,KACd,wBAED,WAAc,IAAD,OACXhE,KAAKgE,SAAQ,GACbP,OAAM5C,EAAAA,EAAAA,GAAI,SAAD,OAAUb,KAAK2C,MAAMC,UAAY,CACxCsB,QAAS,CAAE,eAAgB,oBAC3BR,OAAQ,MACRS,KAAMC,KAAKC,UAAU,CACnB/C,KAAMtB,KAAK2C,MAAMK,KAAK1B,KACtBI,QAAS1B,KAAK2C,MAAMK,KAAKtB,QACzBa,SAAUvC,KAAK2C,MAAMK,KAAKT,SAC1BX,OAAQ5B,KAAK2C,MAAMK,KAAKpB,OACxBE,QAAS9B,KAAK2C,MAAMK,KAAKlB,QACzBE,aAAchC,KAAK2C,MAAMK,KAAKhB,aAC9BE,MAAOlC,KAAK2C,MAAMK,KAAKd,MACvBO,QAASzC,KAAK2C,MAAMF,QACpB6B,kBAAmB,IAAIC,SAExBZ,MAAK,SAACC,GACHA,EAAIC,IACNW,QAAQC,IAAIb,GACZ,EAAKzB,SAAS,2BACd,EAAK6B,SAAQ,GACb,EAAK/D,MAAMC,QAAQC,KAAK,eAExByD,EAAIE,OAAOH,MAAK,SAACC,GACf,EAAKzB,SAASyB,EAAIc,SAClB,EAAKV,SAAQ,WAGpB,oBACD,WAAU,IAAD,OACP,EAAoDhE,KAAK2C,MAAjDK,EAAR,EAAQA,KAAMP,EAAd,EAAcA,QAASM,EAAvB,EAAuBA,KAAME,EAA7B,EAA6BA,MAAOZ,EAApC,EAAoCA,MAAOa,EAA3C,EAA2CA,KAC3C,OACE,gBAAKyB,UAAU,wDAAf,SACI1B,GAKA,UAAC,KAAD,YACE,SAAC,IAAD,CAAYlD,GAAI,gBAChB,SAAC,KAAD,CAAM4E,UAAU,yBAAhB,UACE,SAAC,KAAD,CAAMC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAxB,UACE,SAAC,KAAD,CAAOH,UAAU,OAAjB,UACE,UAAC,KAAD,CAAWA,UAAU,MAArB,UACG,KACD,eAAIpE,MAAO,CAAED,MAAO,SAApB,sCACA,0CACgB0C,EAAK1B,KADrB,IAC4B0B,EAAKtB,YAEjC,uCAAesB,EAAKlB,YACpB,4DAA2BkB,EAAKhB,iBAChC,sCAAcgB,EAAKd,UACnB,kBACCa,GACCA,EAAKgC,KAAI,SAACC,EAAGC,GAAJ,OACP,iCACE,gBAAI1E,MAAO,CAAED,MAAO,OAApB,0BACgB2E,EAAQ,EADxB,MAC8BD,EAAE3B,aAEhC,0CAAkB2B,EAAE1B,gBACpB,wBACG0B,EAAEzB,OAAOwB,KAAI,SAACG,GAAD,OACZ,wBAAKA,yBASvB,SAAC,KAAD,CAAMP,UAAU,yBAAhB,UACE,SAAC,KAAD,CAAMC,GAAI,EAAGC,GAAI,EAAGC,GAAI,EAAxB,UACE,SAAC,KAAD,CAAOH,UAAU,OAAjB,UACE,SAAC,KAAD,CAAWA,UAAU,MAArB,UACE,UAAC,KAAD,CACEQ,SAAU,SAAC/D,GACTA,EAAEgE,kBAFN,WAKE,UAAC,KAAD,CAAaT,UAAU,OAAvB,WACE,SAAC,KAAD,CACEU,UAAU,QACVC,QAAQ,qBAFV,kCAMA,UAAC,KAAD,CACExC,GAAG,qBACHyC,SAAUvF,KAAKwC,UACfhB,MAAOiB,EACP+C,UAAQ,EAJV,WAME,kCACCzC,GACCA,EAAKgC,KAAI,SAACC,EAAGC,GAAJ,OACP,mBAAoBzD,MAAOwD,EAAElC,GAA7B,SACGkC,EAAE3B,UADQ4B,aAMrB,iBAAKN,UAAU,SAAf,UACGzB,GACC,SAAC,KAAD,CACEJ,GAAG,kBACH6B,UAAU,OACVc,UAAQ,EAHV,UAKE,SAAC,IAAD,OAGF,SAAC,KAAD,CACEnF,MAAM,UACNoF,KAAK,SACLtF,QAAS,kBAAM,EAAKuF,cAHtB,uBAQF,2BAAQtD,sBAtFtB,+BACE,SAAC,IAAD,UAgGT,qBA+BD,SAAQuD,GACN5F,KAAKqB,SAAS,CACZ6B,KAAM0C,MAET,sBACD,SAAS1C,GACPlD,KAAKqB,SAAS,CACZ4B,MAAOC,QAEV,EA/PkBhC,CAAgCD,EAAAA","sources":["../node_modules/@coreui/icons/js/free/cil-chevron-circle-left-alt.js","components/BackButton.js","const/api.js","views/pages/Loading.js","views/pages/user/AccessAuthorizationUser.js"],"sourcesContent":["export const cilChevronCircleLeftAlt = [\"512 512\",\"<path fill='var(--ci-primary-color, currentColor)' d='M256,496A240,240,0,0,1,86.294,86.294,240,240,0,0,1,425.706,425.706,238.43,238.43,0,0,1,256,496Zm0-448C141.309,48,48,141.309,48,256s93.309,208,208,208,208-93.309,208-208S370.691,48,256,48Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='284.687 379.313 161.373 256 284.687 132.687 307.313 155.313 206.628 256 307.313 356.687 284.687 379.313' class='ci-primary'/>\"]","import { cilChevronCircleLeftAlt } from \"@coreui/icons\";\r\nimport CIcon from \"@coreui/icons-react\";\r\nimport { CButton } from \"@coreui/react\";\r\nimport React, { Component } from \"react\";\r\nimport { withRouter } from 'react-router'\r\n\r\nclass BackButton extends Component {\r\n  \r\n  onBack(to) {\r\n    this.props.history.push(to);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <CButton\r\n        onClick={() => this.onBack(this.props.to)}\r\n        color=\"light\"\r\n        style={{ width: \"100px\", marginBottom: \"20px\" }}\r\n      >\r\n        <CIcon icon={cilChevronCircleLeftAlt}></CIcon> Retour\r\n      </CButton>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(BackButton);\r\n","export default function api(link) {\r\n  return `${process.env.REACT_APP_BACKEND_HOST}/${link}`;\r\n}\r\n","import React from \"react\";\r\nimport { CSpinner } from \"@coreui/react\";\r\nclass Loading extends React.Component {\r\n  render() {\r\n    return <CSpinner />;\r\n  }\r\n}\r\nexport default Loading;\r\n","import React from \"react\";\r\nimport {\r\n  CButton,\r\n  CCard,\r\n  CCardBody,\r\n  CCol,\r\n  CContainer,\r\n  CForm,\r\n  CInputGroup,\r\n  CInputGroupText,\r\n  CRow,\r\n  CFormSelect,\r\n} from \"@coreui/react\";\r\nimport api from \"../../../const/api\";\r\nimport Loading from \"../Loading\";\r\nimport BackButton from \"../../../components/BackButton\";\r\n\r\nexport default class AccessAuthorizationUser extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { match } = props;\r\n    this.state = {\r\n      user_id: match && match.params && match.params.id,\r\n      role_id: null,\r\n      role: null,\r\n      user: null,\r\n      ready: false,\r\n      error: \"\",\r\n      load: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // this.getUser();\r\n    // this.getRole();\r\n    const userTemp = {\r\n      id: 1,\r\n      name: \"User\",\r\n      surname: \"Default\",\r\n      gender: \"H\",\r\n      address: \"Tana\",\r\n      number_phone: \"033313516\",\r\n      email: \"defaul@gmail.com\",\r\n      activated: \"Activer\",\r\n      role_id: 1,\r\n    };\r\n    const roleTemp = [\r\n      {\r\n        id: 1,\r\n        entitled: \"Role1\",\r\n        description: \"Accès limité\",\r\n        access: [\"Liste utilisateur\", \"Statistique apple d'offre\"],\r\n      },\r\n      {\r\n        id: 2,\r\n        entitled: \"Role2\",\r\n        description: \"Accès complet\",\r\n        access: [\"Tous\"],\r\n      },\r\n    ];\r\n    this.setState({\r\n      user: userTemp,\r\n      role_id: userTemp.role_id,\r\n      role: roleTemp,\r\n      ready: true,\r\n    });\r\n  }\r\n\r\n  getUser() {\r\n    this.setReady(false);\r\n    fetch(api(`users/${this.state.user_id}`), { method: \"GET\" }).then((res) => {\r\n      if (res.ok)\r\n        res.json().then((data) => {\r\n          if (data) {\r\n            this.setState({\r\n              user: data.user,\r\n              role_id: data.user.role_id.id,\r\n              ready: true,\r\n            });\r\n            if (data.user.email === null) {\r\n              this.setState({ email: \"\" });\r\n            }\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  getRole() {\r\n    this.setLoad(true);\r\n    fetch(api(`role`)).then((res) => {\r\n      if (res.ok)\r\n        res.json().then((data) => {\r\n          if (data && data.roles)\r\n            this.setState({\r\n              role: data.roles,\r\n            });\r\n        });\r\n    });\r\n    this.setLoad(false);\r\n  }\r\n\r\n  updateUser() {\r\n    this.setLoad(true);\r\n    fetch(api(`users/${this.state.user_id}`), {\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      method: \"PUT\",\r\n      body: JSON.stringify({\r\n        name: this.state.user.name,\r\n        surname: this.state.user.surname,\r\n        username: this.state.user.username,\r\n        gender: this.state.user.gender,\r\n        address: this.state.user.address,\r\n        number_phone: this.state.user.number_phone,\r\n        email: this.state.user.email,\r\n        role_id: this.state.role_id,\r\n        modification_date: new Date(),\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        console.log(res);\r\n        this.setError(\"Modification réussie\");\r\n        this.setLoad(false);\r\n        this.props.history.push(\"/user/list\");\r\n      } else\r\n        res.json().then((res) => {\r\n          this.setError(res.message);\r\n          this.setLoad(false);\r\n        });\r\n    });\r\n  }\r\n  render() {\r\n    const { user, role_id, role, ready, error, load } = this.state;\r\n    return (\r\n      <div className=\"bg-light min-vh-50 d-flex flex-row align-items-center\">\r\n        {!ready ? (\r\n          <>\r\n            <Loading></Loading>\r\n          </>\r\n        ) : (\r\n          <CContainer>\r\n            <BackButton to={\"/user/list\"} />\r\n            <CRow className=\"justify-content-center\">\r\n              <CCol md={9} lg={9} xl={6}>\r\n                <CCard className=\"mx-4\">\r\n                  <CCardBody className=\"p-4\">\r\n                    {\" \"}\r\n                    <h1 style={{ color: \"green\" }}>Autorisation d'accès</h1>\r\n                    <h6>\r\n                      Utilisateur: {user.name} {user.surname}\r\n                    </h6>\r\n                    <h6> Adresse: {user.address}</h6>\r\n                    <h6> Numéro de téléphone: {user.number_phone}</h6>\r\n                    <h6> Email : {user.email}</h6>\r\n                    <br />\r\n                    {role &&\r\n                      role.map((c, index) => (\r\n                        <>\r\n                          <h5 style={{ color: \"red\" }}>\r\n                            Autorisation {index + 1} : {c.entitled}\r\n                          </h5>\r\n                          <h6>Description: {c.description}</h6>\r\n                          <ul>\r\n                            {c.access.map((acces) => (\r\n                              <li>{acces}</li>\r\n                            ))}\r\n                          </ul>\r\n                        </>\r\n                      ))}\r\n                  </CCardBody>\r\n                </CCard>\r\n              </CCol>\r\n            </CRow>\r\n            <CRow className=\"justify-content-center\">\r\n              <CCol md={9} lg={9} xl={6}>\r\n                <CCard className=\"mx-4\">\r\n                  <CCardBody className=\"p-4\">\r\n                    <CForm\r\n                      onSubmit={(e) => {\r\n                        e.preventDefault();\r\n                      }}\r\n                    >\r\n                      <CInputGroup className=\"mb-3\">\r\n                        <CInputGroupText\r\n                          component=\"label\"\r\n                          htmlFor=\"inputGroupSelect01\"\r\n                        >\r\n                          Autorisation (Role)\r\n                        </CInputGroupText>\r\n                        <CFormSelect\r\n                          id=\"inputGroupSelect01\"\r\n                          onChange={this.setRoleId}\r\n                          value={role_id}\r\n                          required\r\n                        >\r\n                          <option> </option>\r\n                          {role &&\r\n                            role.map((c, index) => (\r\n                              <option key={index} value={c.id}>\r\n                                {c.entitled}\r\n                              </option>\r\n                            ))}\r\n                        </CFormSelect>\r\n                      </CInputGroup>\r\n                      <div className=\"d-grid\">\r\n                        {load ? (\r\n                          <CButton\r\n                            id=\"aim-color-green\"\r\n                            className=\"px-4\"\r\n                            disabled\r\n                          >\r\n                            <Loading></Loading>\r\n                          </CButton>\r\n                        ) : (\r\n                          <CButton\r\n                            color=\"success\"\r\n                            type=\"submit\"\r\n                            onClick={() => this.updateUser()}\r\n                          >\r\n                            Modifier\r\n                          </CButton>\r\n                        )}\r\n                        <label>{error}</label>\r\n                      </div>\r\n                    </CForm>\r\n                  </CCardBody>\r\n                </CCard>\r\n              </CCol>\r\n            </CRow>\r\n          </CContainer>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n  setName = (e) => {\r\n    this.setState({\r\n      name: e.target.value,\r\n    });\r\n  };\r\n  setSurname = (e) => {\r\n    this.setState({\r\n      surname: e.target.value,\r\n    });\r\n  };\r\n  setGender = (e) => {\r\n    this.setState({\r\n      gender: e.target.value,\r\n    });\r\n  };\r\n  setAddress = (e) => {\r\n    this.setState({\r\n      address: e.target.value,\r\n    });\r\n  };\r\n  setNumberPhone = (e) => {\r\n    this.setState({\r\n      number_phone: e.target.value,\r\n    });\r\n  };\r\n  setEmail = (e) => {\r\n    this.setState({\r\n      email: e.target.value,\r\n    });\r\n  };\r\n  setLoad(l) {\r\n    this.setState({\r\n      load: l,\r\n    });\r\n  }\r\n  setReady(load) {\r\n    this.setState({\r\n      ready: load,\r\n    });\r\n  }\r\n\r\n  setError = (err) => {\r\n    this.setState({\r\n      error: err,\r\n    });\r\n  };\r\n\r\n  setUsername = (e) => {\r\n    this.setState({\r\n      username: e.target.value,\r\n    });\r\n  };\r\n\r\n  setRoleId = (e) => {\r\n    this.setState({\r\n      role_id: e.target.value,\r\n    });\r\n  };\r\n}\r\n"],"names":["cilChevronCircleLeftAlt","BackButton","to","this","props","history","push","onClick","onBack","color","style","width","marginBottom","icon","Component","withRouter","api","link","process","Loading","React","AccessAuthorizationUser","setName","e","setState","name","target","value","setSurname","surname","setGender","gender","setAddress","address","setNumberPhone","number_phone","setEmail","email","setError","err","error","setUsername","username","setRoleId","role_id","match","state","user_id","params","id","role","user","ready","load","userTemp","activated","entitled","description","access","setReady","fetch","method","then","res","ok","json","data","setLoad","roles","headers","body","JSON","stringify","modification_date","Date","console","log","message","className","md","lg","xl","map","c","index","acces","onSubmit","preventDefault","component","htmlFor","onChange","required","disabled","type","updateUser","l"],"sourceRoot":""}