"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[526],{7947:function(e,t,n){function s(e){return"".concat("http://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}n.d(t,{Z:function(){return s}})},6526:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var s=n(5671),i=n(3144),c=n(136),a=n(2882),r=n(2791),o=n(8983),l=n(4846),u=n(3232),d=n(7947),h=n(184),v=function(e){(0,c.Z)(n,e);var t=(0,a.Z)(n);function n(e){var i;return(0,s.Z)(this,n),(i=t.call(this,e)).pagination=function(e){for(var t=[],n=1;n<=e;n++)t.push(n);i.setState({pagination:t})},i.getUserData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=["valide=1"];e&&""!==e&&n.push("nom=".concat(e)),t&&t>=0&&n.push("active=".concat(t)),""!==(n=n.join("&"))&&(n="?".concat(n)),i.setLoading(!0),fetch((0,d.Z)("users".concat(n)),{method:"GET"}).then((function(e){if(e.ok)return e.json().then((function(e){i.setState({users:e}),i.setLoading(!1)}))}))},i.cancelFormModal=function(){i.setFormModalState(!1),i.clearFields(),i.setError()},i.setActivation=function(e){i.setState({activated:e.target.value})},i.setRoleId=function(e){i.setState({role_id:e.target.value})},i.setName=function(e){i.setState({name:e.target.value})},i.state={formModalState:!1,deleteModalState:!1,loading:!0,users:null,roles:null,pagination:[],totalPage:0,pageList:1,pageNumber:10,error:"",activated:-1,name:"",id:0},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.getUserData();this.setState({roles:[{id:1,entitled:"Role1",description:"Acc\xe8s limit\xe9",access:["Liste utilisateur","Statistique apple d'offre"]},{id:2,entitled:"Role2",description:"Acc\xe8s complet",access:["Tous"]}]})}},{key:"activatedUser",value:function(e){var t=this;fetch((0,d.Z)("users/activate/".concat(e)),{method:"PUT"}).then((function(e){e.ok&&(t.getUserData(),t.setDeleteModalState(!1))}))}},{key:"deactivatedUser",value:function(e){var t=this;fetch((0,d.Z)("users/deactivate/".concat(e)),{method:"PUT"}).then((function(e){e.ok&&(t.getUserData(),t.setDeleteModalState(!1))}))}},{key:"userActivation",value:function(e){this.setId(e),this.setDeleteModalState(!0)}},{key:"addUser",value:function(){this.props.history.push("/register")}},{key:"accessAuthorization",value:function(e){this.props.history.push("/user/accessAuthorization/"+e)}},{key:"userUpdatePassword",value:function(e){this.props.history.push("/user/update/password/"+e)}},{key:"search",value:function(){var e=this.state,t=e.activated,n=e.name;this.getUserData(n,t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.users,s=t.deleteModalState,i=t.id;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.rb,{className:"justify-content-center",children:(0,h.jsx)(o.b7,{md:9,lg:9,xl:6,children:(0,h.jsx)(o.xH,{className:"mx-4",children:(0,h.jsx)("div",{style:{overflowX:"auto"},children:(0,h.jsxs)(o.lx,{onSubmit:function(e){e.preventDefault()},style:{display:"flex",flexWrap:"nowrap",alignItems:"center"},children:[(0,h.jsxs)(o.YR,{children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputGroupSelect01",children:"Nom"}),(0,h.jsx)(o.jO,{id:"inputGroupSelect01",onChange:this.setName})]}),(0,h.jsxs)(o.YR,{children:[(0,h.jsx)(o.wV,{component:"label",htmlFor:"inputGroupSelect01",children:"Status"}),(0,h.jsxs)(o.LX,{id:"inputGroupSelect01",onChange:this.setActivation,value:this.state.activated,children:[(0,h.jsx)("option",{value:-1,children:"Tous"}),(0,h.jsx)("option",{value:1,children:"Activ\xe9"}),(0,h.jsx)("option",{value:0,children:"D\xe9sactiv\xe9"})]})]}),(0,h.jsx)("div",{className:"d-grid",children:(0,h.jsx)(o.u5,{color:"success",type:"submit",onClick:function(){return e.search()},children:"voir"})})]})})})})}),(0,h.jsx)(o.rb,{children:(0,h.jsx)(o.b7,{xs:12,children:(0,h.jsx)(o.xH,{className:"mb-4",children:(0,h.jsx)(o.sl,{children:(0,h.jsx)("div",{style:{overflowX:"auto"},children:(0,h.jsxs)(o.Sx,{children:[(0,h.jsx)(o.V,{children:(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.is,{scope:"col",children:"Nom "}),(0,h.jsx)(o.is,{scope:"col",children:"Pr\xe9nom"}),(0,h.jsx)(o.is,{scope:"col",children:"Email"}),(0,h.jsx)(o.is,{scope:"col",children:"Status"})]})}),(0,h.jsx)(o.NR,{children:n&&n.map((function(t,n){return(0,h.jsxs)(o.T6,{children:[(0,h.jsx)(o.NN,{children:t.NOM}),(0,h.jsx)(o.NN,{children:t.PRENOM}),(0,h.jsx)(o.NN,{children:t.EMAIL}),0===t.ACTIVE?(0,h.jsx)(o.NN,{style:{color:"red"},children:"D\xe9sactiv\xe9"}):(0,h.jsx)(o.NN,{style:{color:"green"},children:"Activ\xe9"}),(0,h.jsx)(o.NN,{children:(0,h.jsxs)(o.u5,{color:"danger",onClick:function(){return e.userActivation(n)},children:["Activation ",(0,h.jsx)(l.Z,{icon:u.U})]})})]},t.id)}))})]})})})})})}),(0,h.jsxs)(o.Tk,{alignment:"center",visible:s,onClose:function(){return e.setDeleteModalState(!1)},children:[(0,h.jsx)(o.p0,{children:(0,h.jsx)(o.fl,{children:"Activer ou D\xe9sactiver"})}),(0,h.jsx)(o.sD,{children:(0,h.jsxs)("p",{children:["Voulez-vous activer ou d\xe9sactiver"," ",n&&n.length>0&&i<n.length&&"".concat(n[i].NOM," ").concat(n[i].PRENOM),"?"]})}),(0,h.jsxs)(o.Ym,{children:[(0,h.jsx)(o.u5,{color:"secondary",onClick:function(){return e.setDeleteModalState(!1)},children:"Annuler"}),(0,h.jsx)(o.u5,{color:"danger",onClick:function(){return e.deactivatedUser(e.state.users[e.state.id].ID)},children:"D\xe9sactiver"}),(0,h.jsx)(o.u5,{color:"success",onClick:function(){return e.activatedUser(e.state.users[e.state.id].ID)},children:"Activer"})]})]})]})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setId",value:function(e){this.setState({id:e})}},{key:"setDeleteModalState",value:function(e){this.setState({deleteModalState:e})}}]),n}(r.Component)},3232:function(e,t,n){n.d(t,{U:function(){return s}});var s=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M384,200V144a128,128,0,0,0-256,0v56H88V328c0,92.635,75.364,168,168,168s168-75.365,168-168V200ZM160,144a96,96,0,0,1,192,0v56H160ZM392,328c0,74.99-61.01,136-136,136s-136-61.01-136-136V232H392Z' class='ci-primary'/>"]}}]);
//# sourceMappingURL=526.6a145485.chunk.js.map