"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[434],{7947:function(t,e,n){function a(t){return"".concat("https://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(t)}n.d(e,{Z:function(){return a}})},6524:function(t,e,n){var a=n(5671),i=n(3144),r=n(136),s=n(2882),o=n(2791),l=n(8983),c=n(184),u=function(t){(0,r.Z)(n,t);var e=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,c.jsx)(l.LQ,{})}}]),n}(o.Component);e.Z=u},5434:function(t,e,n){n.r(e),n.d(e,{default:function(){return p}});var a=n(5671),i=n(3144),r=n(136),s=n(2882),o=n(2791),l=n(8983),c=n(7947),u=n(2426),d=n.n(u),h=n(6524),g=n(184),p=function(t){(0,r.Z)(n,t);var e=(0,s.Z)(n);function n(t){var i;(0,a.Z)(this,n),(i=e.call(this,t)).pagination=function(t){for(var e=[],n=1;n<=t;n++)e.push(n);i.setState({pagination:e})},i.getDebtData=function(t,e){i.setLoading(!0);var n=i.state.id_customer;fetch((0,c.Z)("debt/customer/".concat(n,"/page/").concat(t)),{method:"GET"}).then((function(n){if(n.ok)return n.json().then((function(n){i.setState({debt:n.debt,pageList:t,pageNumber:e,totalPage:n.pagination.totalPages}),i.pagination(n.pagination.totalPages),i.setLoading(!1)}))}))};var r=t.match;return i.state={id_customer:r&&r.params&&r.params.id,loading:!0,debt:null,error:"",role:"",load:!1,history:!1,pagination:[],totalPage:0,pageList:1,pageNumber:10},i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){if(sessionStorage.getItem("user")){var t=JSON.parse(sessionStorage.getItem("user"));this.setRole(t.role_id.entitled)}this.getDebtPayment(),this.getDebtData(1)}},{key:"getDebtPayment",value:function(){var t=this;this.setLoading(!0);var e=this.state.id_customer;fetch((0,c.Z)("debtPayment/history/".concat(e)),{method:"GET"}).then((function(e){e.ok&&e.json().then((function(e){e&&e.total&&(null!=e.total.total?t.setState({history:!1,loading:!1}):t.setState({history:!0,loading:!1}))}))}))}},{key:"DebtDetail",value:function(t){this.props.history.push("/debt/details/"+t)}},{key:"debtPayementDetailGlobal",value:function(t){var e=this.state.id_customer;this.props.history.push("/debt/payment/"+e)}},{key:"render",value:function(){var t=this,e=this.state,n=e.debt,a=e.role,i=e.loading,r=e.pageNumber,s=e.pagination,o=e.totalPage,c=e.pageList,u=e.history;return i?(0,g.jsx)(h.Z,{}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(l.rb,{children:(0,g.jsx)(l.b7,{xs:12,children:(0,g.jsxs)(l.xH,{className:"mb-4",children:[(0,g.jsxs)(l.bn,{style:{display:"flex",justifyContent:"space-between"},children:[(0,g.jsx)("strong",{children:"Liste des Dettes"}),(0,g.jsx)(l.u5,{color:"light",onClick:function(){return t.debtPayementDetailGlobal()},disabled:u,children:"Historique des paiements"})]}),(0,g.jsxs)(l.sl,{children:[(0,g.jsxs)(l.Sx,{children:[(0,g.jsx)(l.V,{children:(0,g.jsxs)(l.T6,{children:[(0,g.jsx)(l.is,{scope:"col",children:"Derni\xe8re modification"}),(0,g.jsx)(l.is,{scope:"col",children:"Libelle"}),(0,g.jsx)(l.is,{scope:"col",children:"Montant total (dette)"})]})}),(0,g.jsx)(l.NR,{children:n&&n.map((function(e,n){return(0,g.jsxs)(l.T6,{children:[(0,g.jsx)(l.NN,{children:d()(e.modif_date).format("YYYY-MM-DD HH:mm:ss")}),(0,g.jsx)(l.NN,{children:e.libelle}),(0,g.jsx)(l.NN,{children:Number(e.total_amount)>1e3?(0,g.jsxs)(g.Fragment,{children:[Number(e.total_amount).toLocaleString()," Ar"]}):(0,g.jsxs)(g.Fragment,{children:[e.total_amount," Ar"]})}),"Administrateur"===a?(0,g.jsx)(l.NN,{children:(0,g.jsx)(l.u5,{color:"light",onClick:function(){return t.DebtDetail(e.debt_id)},children:"Voir"})}):(0,g.jsx)(g.Fragment,{})]},n)}))})]}),(0,g.jsxs)(l.E7,{"aria-label":"Page navigation example",children:[(0,g.jsx)(l.tn,{"aria-label":"Previous",disabled:1===c,onClick:function(){return t.getDebtData(c-1,r)},children:(0,g.jsx)("span",{"aria-hidden":"true",children:"\xab"})}),s.map((function(e,n){return(0,g.jsx)(l.tn,{active:e===c,onClick:function(){return t.getDebtData(e,r)},children:" ".concat(e," ")},n)})),(0,g.jsx)(l.tn,{"aria-label":"Next",disabled:o-c===0||n&&0===n.length,onClick:function(){return t.getDebtData(c+1,r)},children:(0,g.jsx)("span",{"aria-hidden":"true",children:" \xbb "})})]})]})]})})})})}},{key:"setLoad",value:function(t){this.setState({load:t})}},{key:"setError",value:function(t){this.setState({error:t})}},{key:"setLoading",value:function(t){this.setState({loading:t})}},{key:"setRole",value:function(t){this.setState({role:t})}}]),n}(o.Component)}}]);
//# sourceMappingURL=434.9377ebc5.chunk.js.map