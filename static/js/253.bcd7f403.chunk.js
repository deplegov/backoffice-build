"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[253],{7923:function(e,t,s){s.d(t,{Z:function(){return p}});var r=s(5671),n=s(3144),i=s(136),a=s(2882),o=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M256,496A240,240,0,0,1,86.294,86.294,240,240,0,0,1,425.706,425.706,238.43,238.43,0,0,1,256,496Zm0-448C141.309,48,48,141.309,48,256s93.309,208,208,208,208-93.309,208-208S370.691,48,256,48Z' class='ci-primary'/><polygon fill='var(--ci-primary-color, currentColor)' points='284.687 379.313 161.373 256 284.687 132.687 307.313 155.313 206.628 256 307.313 356.687 284.687 379.313' class='ci-primary'/>"],l=s(4846),u=s(8983),c=s(2791),d=s(8931),h=s(184),m=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"onBack",value:function(e){this.props.history.push(e)}},{key:"render",value:function(){var e=this;return(0,h.jsxs)(u.u5,{onClick:function(){return e.onBack(e.props.to)},color:"light",style:{width:"100px",marginBottom:"20px"},children:[(0,h.jsx)(l.Z,{icon:o})," Retour"]})}}]),s}(c.Component),p=(0,d.EN)(m)},7947:function(e,t,s){function r(e){return"".concat("https://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}s.d(t,{Z:function(){return r}})},6524:function(e,t,s){var r=s(5671),n=s(3144),i=s(136),a=s(2882),o=s(2791),l=s(8983),u=s(184),c=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(){return(0,r.Z)(this,s),t.apply(this,arguments)}return(0,n.Z)(s,[{key:"render",value:function(){return(0,u.jsx)(l.LQ,{})}}]),s}(o.Component);t.Z=c},253:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var r=s(5671),n=s(3144),i=s(136),a=s(2882),o=s(2791),l=s(8983),u=s(7947),c=s(6524),d=s(7923),h=s(184),m=function(e){(0,i.Z)(s,e);var t=(0,a.Z)(s);function s(e){var n;(0,r.Z)(this,s),(n=t.call(this,e)).setName=function(e){n.setState({name:e.target.value})},n.setSurname=function(e){n.setState({surname:e.target.value})},n.setGender=function(e){n.setState({gender:e.target.value})},n.setAddress=function(e){n.setState({address:e.target.value})},n.setNumberPhone=function(e){n.setState({number_phone:e.target.value})},n.setEmail=function(e){n.setState({email:e.target.value})},n.setError=function(e){n.setState({error:e})},n.setUsername=function(e){n.setState({username:e.target.value})},n.setRoleId=function(e){n.setState({role_id:e.target.value})};var i=e.match;return n.state={user_id:i&&i.params&&i.params.id,role_id:null,role:null,user:null,ready:!1,error:"",load:!1},n}return(0,n.Z)(s,[{key:"componentDidMount",value:function(){var e={id:1,name:"User",surname:"Default",gender:"H",address:"Tana",number_phone:"033313516",email:"defaul@gmail.com",activated:"Activer",role_id:1};this.setState({user:e,role_id:e.role_id,role:[{id:1,entitled:"Role1",description:"Acc\xe8s limit\xe9",access:["Liste utilisateur","Statistique apple d'offre"]},{id:2,entitled:"Role2",description:"Acc\xe8s complet",access:["Tous"]}],ready:!0})}},{key:"getUser",value:function(){var e=this;this.setReady(!1),fetch((0,u.Z)("users/".concat(this.state.user_id)),{method:"GET"}).then((function(t){t.ok&&t.json().then((function(t){t&&(e.setState({user:t.user,role_id:t.user.role_id.id,ready:!0}),null===t.user.email&&e.setState({email:""}))}))}))}},{key:"getRole",value:function(){var e=this;this.setLoad(!0),fetch((0,u.Z)("role")).then((function(t){t.ok&&t.json().then((function(t){t&&t.roles&&e.setState({role:t.roles})}))})),this.setLoad(!1)}},{key:"updateUser",value:function(){var e=this;this.setLoad(!0),fetch((0,u.Z)("users/".concat(this.state.user_id)),{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({name:this.state.user.name,surname:this.state.user.surname,username:this.state.user.username,gender:this.state.user.gender,address:this.state.user.address,number_phone:this.state.user.number_phone,email:this.state.user.email,role_id:this.state.role_id,modification_date:new Date})}).then((function(t){t.ok?(console.log(t),e.setError("Modification r\xe9ussie"),e.setLoad(!1),e.props.history.push("/user/list")):t.json().then((function(t){e.setError(t.message),e.setLoad(!1)}))}))}},{key:"render",value:function(){var e=this,t=this.state,s=t.user,r=t.role_id,n=t.role,i=t.ready,a=t.error,o=t.load;return(0,h.jsx)("div",{className:"bg-light min-vh-50 d-flex flex-row align-items-center",children:i?(0,h.jsxs)(l.KB,{children:[(0,h.jsx)(d.Z,{to:"/user/list"}),(0,h.jsx)(l.rb,{className:"justify-content-center",children:(0,h.jsx)(l.b7,{md:9,lg:9,xl:6,children:(0,h.jsx)(l.xH,{className:"mx-4",children:(0,h.jsxs)(l.sl,{className:"p-4",children:[" ",(0,h.jsx)("h1",{style:{color:"green"},children:"Autorisation d'acc\xe8s"}),(0,h.jsxs)("h6",{children:["Utilisateur: ",s.name," ",s.surname]}),(0,h.jsxs)("h6",{children:[" Adresse: ",s.address]}),(0,h.jsxs)("h6",{children:[" Num\xe9ro de t\xe9l\xe9phone: ",s.number_phone]}),(0,h.jsxs)("h6",{children:[" Email : ",s.email]}),(0,h.jsx)("br",{}),n&&n.map((function(e,t){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("h5",{style:{color:"red"},children:["Autorisation ",t+1," : ",e.entitled]}),(0,h.jsxs)("h6",{children:["Description: ",e.description]}),(0,h.jsx)("ul",{children:e.access.map((function(e){return(0,h.jsx)("li",{children:e})}))})]})}))]})})})}),(0,h.jsx)(l.rb,{className:"justify-content-center",children:(0,h.jsx)(l.b7,{md:9,lg:9,xl:6,children:(0,h.jsx)(l.xH,{className:"mx-4",children:(0,h.jsx)(l.sl,{className:"p-4",children:(0,h.jsxs)(l.lx,{onSubmit:function(e){e.preventDefault()},children:[(0,h.jsxs)(l.YR,{className:"mb-3",children:[(0,h.jsx)(l.wV,{component:"label",htmlFor:"inputGroupSelect01",children:"Autorisation (Role)"}),(0,h.jsxs)(l.LX,{id:"inputGroupSelect01",onChange:this.setRoleId,value:r,required:!0,children:[(0,h.jsx)("option",{children:" "}),n&&n.map((function(e,t){return(0,h.jsx)("option",{value:e.id,children:e.entitled},t)}))]})]}),(0,h.jsxs)("div",{className:"d-grid",children:[o?(0,h.jsx)(l.u5,{id:"aim-color-green",className:"px-4",disabled:!0,children:(0,h.jsx)(c.Z,{})}):(0,h.jsx)(l.u5,{color:"success",type:"submit",onClick:function(){return e.updateUser()},children:"Modifier"}),(0,h.jsx)("label",{children:a})]})]})})})})})]}):(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(c.Z,{})})})}},{key:"setLoad",value:function(e){this.setState({load:e})}},{key:"setReady",value:function(e){this.setState({ready:e})}}]),s}(o.Component)}}]);
//# sourceMappingURL=253.bcd7f403.chunk.js.map