"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[745],{7947:function(e,t,r){function n(e){return"".concat("https://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}r.d(t,{Z:function(){return n}})},6524:function(e,t,r){var n=r(5671),i=r(3144),o=r(136),s=r(2882),a=r(2791),c=r(8983),l=r(184),u=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"render",value:function(){return(0,l.jsx)(c.LQ,{})}}]),r}(a.Component);t.Z=u},745:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(5785),i=r(5671),o=r(3144),s=r(136),a=r(2882),c=r(2791),l=r(8983),u=r(4846),d=r(2439),h=r(511),m=r(2800),p=r(7947),f=r(6524),g=r(184),x=function(e){(0,s.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).pagination=function(e){for(var t=[],r=1;r<=e;r++)t.push(r);n.setState({pagination:t})},n.getCustomerData=function(e,t){n.setLoading(!0),fetch((0,p.Z)("customer/page/".concat(e)),{method:"GET"}).then((function(r){if(r.ok)return r.json().then((function(r){n.setState({customers:r.customers,pageList:e,pageNumber:t,totalPage:r.pagination.totalPages}),n.pagination(r.pagination.totalPages),n.setLoading(!1)}))}))},n.cancelFormModal=function(){n.setFormModalState(!1),n.clearFields(),n.setError()},n.state={formModalState:!1,deleteModalState:!1,loading:!0,customers:null,pagination:[],totalPage:0,pageList:1,pageNumber:10,error:"",role:"",id:0},n}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){if(sessionStorage.getItem("user")){var e=JSON.parse(sessionStorage.getItem("user"));this.setRole(e.role_id.entitled)}this.getCustomerData(1)}},{key:"deleteCustomer",value:function(){var e=this;fetch((0,p.Z)("customer/".concat(this.state.customers[this.state.id].id)),{method:"DELETE"}).then((function(t){if(t.ok){var r=(0,n.Z)(e.state.customers);r.splice(e.state.id,1),e.setState({customers:r}),e.setDeleteModalState(!1)}}))}},{key:"customerToDelete",value:function(e){this.setId(e),this.setDeleteModalState(!0)}},{key:"customerUpdate",value:function(e){this.props.history.push("/customer/update/"+e)}},{key:"addCustomer",value:function(){this.props.history.push("/addCustomer")}},{key:"render",value:function(){var e=this,t=this.state,r=t.customers,n=t.loading,i=t.deleteModalState,o=t.id,s=t.pageList,a=t.pageNumber,c=t.pagination,p=t.totalPage,x=t.role;return n?(0,g.jsx)(f.Z,{}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.rb,{children:(0,g.jsx)(l.b7,{xs:12,children:(0,g.jsxs)(l.xH,{className:"mb-4",children:[(0,g.jsx)(l.bn,{children:(0,g.jsxs)("span",{className:"d-grid gap-2 d-md-flex justify-content-between",children:[(0,g.jsx)("strong",{children:"Liste des Clients"}),(0,g.jsxs)(l.u5,{color:"primary",onClick:function(){return e.addCustomer()},children:[(0,g.jsx)(u.Z,{icon:d.q,className:"me-2"}),"Ajouter"]})]})}),(0,g.jsxs)(l.sl,{children:[(0,g.jsxs)(l.Sx,{children:[(0,g.jsx)(l.V,{children:(0,g.jsxs)(l.T6,{children:[(0,g.jsx)(l.is,{scope:"col",children:"Name "}),(0,g.jsx)(l.is,{scope:"col",children:"Pr\xe9nom"}),(0,g.jsx)(l.is,{scope:"col",children:"Genre"}),(0,g.jsx)(l.is,{scope:"col",children:"Adresse"}),(0,g.jsx)(l.is,{scope:"col",children:"Numero"}),(0,g.jsx)(l.is,{scope:"col",children:"Email"})]})}),(0,g.jsx)(l.NR,{children:r&&r.map((function(t,r){return(0,g.jsxs)(l.T6,{children:[(0,g.jsx)(l.NN,{children:t.name}),(0,g.jsx)(l.NN,{children:t.surname}),(0,g.jsx)(l.NN,{children:t.gender}),(0,g.jsx)(l.NN,{children:t.address}),(0,g.jsx)(l.NN,{children:t.number_phone}),(0,g.jsx)(l.NN,{children:t.email}),"Administrateur"===x?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(l.NN,{children:(0,g.jsx)(l.u5,{color:"light",onClick:function(){return e.customerUpdate(t.id)},children:(0,g.jsx)(u.Z,{icon:h.l})})}),(0,g.jsx)(l.NN,{children:(0,g.jsx)(l.u5,{color:"danger",onClick:function(){return e.customerToDelete(r)},children:(0,g.jsx)(u.Z,{icon:m.N})})})]}):(0,g.jsx)(g.Fragment,{})]},t.id)}))})]}),(0,g.jsxs)(l.E7,{"aria-label":"Page navigation example",children:[(0,g.jsx)(l.tn,{"aria-label":"Previous",disabled:1===s,onClick:function(){return e.getCustomerData(s-1,a)},children:(0,g.jsx)("span",{"aria-hidden":"true",children:"\xab"})}),c.map((function(t,r){return(0,g.jsx)(l.tn,{active:t===s,onClick:function(){return e.getCustomerData(t,a)},children:" ".concat(t," ")},r)})),(0,g.jsx)(l.tn,{"aria-label":"Next",disabled:p-s===0||r&&0===r.length,onClick:function(){return e.getCustomerData(s+1,a)},children:(0,g.jsx)("span",{"aria-hidden":"true",children:" \xbb "})})]})]})]})})}),(0,g.jsxs)(l.Tk,{alignment:"center",visible:i,onClose:function(){return e.setDeleteModalState(!1)},children:[(0,g.jsx)(l.p0,{children:(0,g.jsx)(l.fl,{children:"Supprimer"})}),(0,g.jsx)(l.sD,{children:(0,g.jsxs)("p",{children:["Voulez vous supprimer"," ",r&&r.length>0&&o<r.length&&r[o].entitled,"?"]})}),(0,g.jsxs)(l.Ym,{children:[(0,g.jsx)(l.u5,{color:"secondary",onClick:function(){return e.setDeleteModalState(!1)},children:"Annuler"}),(0,g.jsx)(l.u5,{color:"danger",onClick:function(){return e.deleteCustomer()},children:"Supprimer"})]})]})]})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setId",value:function(e){this.setState({id:e})}},{key:"setDeleteModalState",value:function(e){this.setState({deleteModalState:e})}},{key:"setRole",value:function(e){this.setState({role:e})}}]),r}(c.Component)},511:function(e,t,r){r.d(t,{l:function(){return n}});var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]},2439:function(e,t,r){r.d(t,{q:function(){return n}});var n=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"]},2800:function(e,t,r){r.d(t,{N:function(){return n}});var n=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]},5785:function(e,t,r){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"===typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.d(t,{Z:function(){return i}})}}]);
//# sourceMappingURL=745.2244b122.chunk.js.map