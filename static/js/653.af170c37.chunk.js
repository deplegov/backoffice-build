"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[653],{7947:function(e,t,n){function r(e){return"".concat("https://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}n.d(t,{Z:function(){return r}})},6524:function(e,t,n){var r=n(5671),s=n(3144),a=n(136),i=n(2882),d=n(2791),c=n(8983),l=n(184),o=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){return(0,l.jsx)(c.LQ,{})}}]),n}(d.Component);t.Z=o},653:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(5671),s=n(3144),a=n(136),i=n(2882),d=n(2791),c=n(8983),l=n(7947),o=n(6524),h=n(2426),m=n.n(h),u=n(184),x=function(e){(0,a.Z)(n,e);var t=(0,i.Z)(n);function n(e){var s;(0,r.Z)(this,n);var a=e.match;return(s=t.call(this,e)).state={id_customer:a&&a.params&&a.params.id,loading:!0,debtPayment:null,error:"",totalAmountPayed:0,totalAmountToPayed:0,remainder:0},s}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.getDebtPayment()}},{key:"getDebtPayment",value:function(){var e=this;this.setLoading(!0);var t=this.state.id_customer;fetch((0,l.Z)("debtPayment/history/".concat(t)),{method:"GET"}).then((function(t){t.ok&&t.json().then((function(t){t&&e.setState({debtPayment:t.debtPayment,totalAmountPayed:parseInt(t.total.total),totalAmountToPayed:t.totalAmountToPayed,remainder:t.remainder,loading:!1})}))}))}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.debtPayment,r=e.totalAmountPayed,s=e.totalAmountToPayed,a=e.remainder,i={borderColor:"darkslategrey",borderStyle:"solid",borderWidth:"1px"};return t?(0,u.jsx)(o.Z,{}):(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(c.rb,{children:(0,u.jsx)(c.b7,{xs:12,children:(0,u.jsxs)(c.xH,{className:"mb-4",children:[(0,u.jsx)(c.bn,{}),(0,u.jsxs)(c.sl,{children:[(0,u.jsx)("div",{className:"title",children:(0,u.jsx)("h1",{children:"Historique payement"})}),(0,u.jsx)("div",{className:"detail-debtPayment",children:n&&n?(0,u.jsxs)("div",{className:"customer-debtPayment",children:[(0,u.jsx)("div",{className:"customer-detail",children:n[0].customer_id?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("h5",{children:[n[0].customer_id.name," ",n[0].customer_id.surname]}),(0,u.jsx)("h5",{children:n[0].customer_id.address}),(0,u.jsx)("h5",{children:n[0].customer_id.number_phone})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h5",{children:"Aucun client"}),(0,u.jsx)("h5",{children:"Aucune adresse"}),(0,u.jsx)("h5",{children:"Aucun contact"})]})}),(0,u.jsxs)("div",{className:"info-debtPayment",children:[(0,u.jsxs)("div",{className:"div-display",children:[(0,u.jsxs)("div",{className:"date-ref-title",children:[(0,u.jsx)("h5",{children:"Ref#"}),(0,u.jsx)("h5",{children:"Date et Heure# "})]}),(0,u.jsxs)("div",{className:"date-ref",children:[(0,u.jsx)("h5",{children:n[0].customer_id.id+n[0].customer_id.gender}),(0,u.jsx)("h5",{children:m()(n[0].modification_date).format("YYYY-MM-DD HH:mm:ss")})]})]}),(0,u.jsxs)("div",{className:"info-received",children:[(0,u.jsx)("h5",{children:"Montant total dette:"}),(0,u.jsx)("h5",{children:s>1e3?(0,u.jsxs)(u.Fragment,{children:[s.toLocaleString()," Ar"]}):(0,u.jsxs)(u.Fragment,{children:[s," Ar"]})})]}),(0,u.jsxs)("div",{className:"info-received",children:[(0,u.jsx)("h5",{children:"Payer :"}),(0,u.jsx)("h5",{children:r>1e3?(0,u.jsxs)(u.Fragment,{children:[r.toLocaleString()," Ar"]}):(0,u.jsxs)(u.Fragment,{children:[r," Ar"]})})]}),(0,u.jsxs)("div",{className:"info-received",children:[(0,u.jsx)("h5",{children:"Reste \xe0 payer :"}),(0,u.jsx)("h5",{style:{color:"red"},children:a>1e3?(0,u.jsxs)(u.Fragment,{children:[a.toLocaleString()," Ar"]}):(0,u.jsxs)(u.Fragment,{children:[a," Ar"]})})]})]})]}):(0,u.jsx)("div",{})}),(0,u.jsxs)(c.Sx,{children:[(0,u.jsx)(c.V,{style:{backgroundColor:"grey",border:"1"},children:(0,u.jsxs)(c.T6,{children:[(0,u.jsx)(c.is,{scope:"col",children:"Date"}),(0,u.jsx)(c.is,{scope:"col",children:"Libelle"}),(0,u.jsx)(c.is,{scope:"col",children:"Montant payer"}),(0,u.jsx)(c.is,{scope:"col",children:"Re\xe7u par"})]})}),(0,u.jsx)(c.NR,{children:n&&n.map((function(e,t){return(0,u.jsxs)(c.T6,{children:[(0,u.jsx)(c.NN,{style:i,children:m()(e.date_payment).format("YYYY-MM-DD HH:mm:ss")}),(0,u.jsx)(c.NN,{style:i,children:""!==e.libelle?(0,u.jsx)(u.Fragment,{children:e.libelle}):(0,u.jsx)(u.Fragment,{children:e.entry_debt_id.libelle})}),(0,u.jsx)(c.NN,{style:i,children:e.total_amount_payed>1e3?(0,u.jsxs)(u.Fragment,{children:[e.total_amount_payed.toLocaleString()," Ar"]}):(0,u.jsxs)(u.Fragment,{children:[e.total_amount_payed," Ar"]})}),(0,u.jsxs)(c.NN,{style:i,children:[e.received_by.name," ",e.received_by.surname]})]},t)}))})]})]})]})})})})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setId",value:function(e){this.setState({id:e})}},{key:"setTotal",value:function(e){this.setState({total:e})}}]),n}(d.Component)}}]);
//# sourceMappingURL=653.af170c37.chunk.js.map