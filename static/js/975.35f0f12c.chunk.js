"use strict";(self.webpackChunkgouvernance=self.webpackChunkgouvernance||[]).push([[975],{7947:function(e,n,t){function r(e){return"".concat("http://dam-api-qa.northeurope.cloudapp.azure.com","/").concat(e)}t.d(n,{Z:function(){return r}})},6524:function(e,n,t){var r=t(5671),i=t(3144),s=t(136),a=t(2882),l=t(2791),c=t(8983),o=t(184),u=function(e){(0,s.Z)(t,e);var n=(0,a.Z)(t);function t(){return(0,r.Z)(this,t),n.apply(this,arguments)}return(0,i.Z)(t,[{key:"render",value:function(){return(0,o.jsx)(c.LQ,{})}}]),t}(l.Component);n.Z=u},9975:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var r=t(5785),i=t(5671),s=t(3144),a=t(136),l=t(2882),c=t(2791),o=t(8983),u=t(4846),d=t(2439),h=t(2800),x=t(7947),m=t(6524),j=t(2426),p=t.n(j),f=t(184),g=function(e){(0,a.Z)(t,e);var n=(0,l.Z)(t);function t(e){var r;return(0,i.Z)(this,t),(r=n.call(this,e)).pagination=function(e){for(var n=[],t=1;t<=e;t++)n.push(t);r.setState({pagination:n})},r.getEntryData=function(e,n,t,i,s,a){r.setLoading(!0),fetch((0,x.Z)("entry/".concat(i,"/").concat(t,"/").concat(s,"/").concat(a,"/page/").concat(e)),{method:"GET"}).then((function(t){if(t.ok)return t.json().then((function(t){r.setState({entry:t.entry,pageList:e,pageNumber:n,totalPage:t.pagination.totalPages}),r.pagination(t.pagination.totalPages),r.setLoading(!1)}))}))},r.cancelFormModal=function(){r.setFormModalState(!1),r.clearFields(),r.setError()},r.setOffset=function(e){r.setState({offset:e})},r.setLimit=function(e){r.setState({limit:e})},r.state={formModalState:!1,deleteModalState:!1,loading:!0,entry:null,error:"",role:"",id:0,pagination:[],totalPage:0,pageList:1,pageNumber:10,customer:"",option:"none"},r}return(0,s.Z)(t,[{key:"componentDidMount",value:function(){if(sessionStorage.getItem("user")){var e=JSON.parse(sessionStorage.getItem("user"));this.setRole(e.role_id.entitled)}this.getEntryData(1,null,"none","customer",0,"service")}},{key:"deleteEntry",value:function(){var e=this;fetch((0,x.Z)("entry/".concat(this.state.entry[this.state.id].id)),{method:"DELETE"}).then((function(n){if(n.ok){var t=(0,r.Z)(e.state.entry);t.splice(e.state.id,1),e.setState({entry:t}),e.setDeleteModalState(!1),e.props.history.push("/entry/list")}}))}},{key:"entryToDelete",value:function(e){this.setId(e),this.setDeleteModalState(!0)}},{key:"entryDetails",value:function(e,n,t,r,i,s){var a=0;"customer"===s?null!=t?(this.setCustomer("".concat(e," ").concat(n)),a=t):(a=0,this.setCustomer("Inconnu")):"service"===s&&(this.setCustomer("".concat(n)),a=null!=t?t:0),this.reload(r,"service",a,i)}},{key:"reload",value:function(e,n,t,r){this.setOption(e),this.getEntryData(1,null,e,n,t,r)}},{key:"addEntry",value:function(){this.props.history.push("/entry/insert")}},{key:"render",value:function(){var e=this,n=this.state,t=n.entry,r=n.role,i=n.loading,s=n.pagination,a=n.pageNumber,l=n.totalPage,c=n.pageList,x=n.option,j=n.customer,g=n.id,y=n.deleteModalState;return i?(0,f.jsx)(m.Z,{}):(0,f.jsx)(f.Fragment,{children:"none"===x?(0,f.jsx)(o.rb,{children:(0,f.jsx)(o.b7,{xs:12,children:(0,f.jsxs)(o.xH,{className:"mb-4",children:[(0,f.jsx)(o.bn,{children:(0,f.jsxs)("span",{className:"d-grid gap-2 d-md-flex justify-content-between",children:[(0,f.jsx)("strong",{children:"Liste des entr\xe9es par client"}),(0,f.jsxs)(o.u5,{color:"primary",onClick:function(){return e.addEntry()},children:[(0,f.jsx)(u.Z,{icon:d.q,className:"me-2"}),"Ajouter"]})]})}),(0,f.jsxs)(o.sl,{children:[(0,f.jsxs)(o.Sx,{children:[(0,f.jsx)(o.V,{children:(0,f.jsxs)(o.T6,{children:[(0,f.jsx)(o.is,{scope:"col",children:"Nom"}),(0,f.jsx)(o.is,{scope:"col",children:"Pr\xe9nom(s)"}),(0,f.jsx)(o.is,{scope:"col",children:"Montant Total"})]})}),(0,f.jsx)(o.NR,{children:t&&t.map((function(n,t){return(0,f.jsxs)(o.T6,{children:[n.name||n.surname?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.NN,{children:n.name}),(0,f.jsx)(o.NN,{children:n.surname})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.NN,{children:"Inconnu"}),(0,f.jsx)(o.NN,{children:"Inconnu"})]}),(0,f.jsx)(o.NN,{children:Number(n.total_amount)>1e3?(0,f.jsxs)(f.Fragment,{children:[Number(n.total_amount).toLocaleString()," Ar"]}):(0,f.jsxs)(f.Fragment,{children:[n.total_amount," Ar"]})}),(0,f.jsx)(o.NN,{children:(0,f.jsx)(o.u5,{color:"light",onClick:function(){return e.entryDetails(n.name,n.surname,n.id,"findCustomer","service","customer")},children:"Voir"})})]},t)}))})]}),(0,f.jsxs)(o.E7,{"aria-label":"Page navigation example",children:[(0,f.jsx)(o.tn,{"aria-label":"Previous",disabled:1===c,onClick:function(){return e.getEntryData(c-1,a)},children:(0,f.jsx)("span",{"aria-hidden":"true",children:"\xab"})}),s.map((function(n,t){return(0,f.jsx)(o.tn,{active:n===c,onClick:function(){return e.getEntryData(n,a)},children:" ".concat(n," ")},t)})),(0,f.jsx)(o.tn,{"aria-label":"Next",disabled:l-c===0||0===t.length,onClick:function(){return e.getEntryData(c+1,a)},children:(0,f.jsx)("span",{"aria-hidden":"true",children:" \xbb "})})]})]})]})})}):"findCustomer"===x?(0,f.jsx)(o.rb,{children:(0,f.jsx)(o.b7,{xs:12,children:(0,f.jsxs)(o.xH,{className:"mb-4",children:[(0,f.jsx)(o.bn,{children:(0,f.jsxs)("span",{className:"d-grid gap-2 d-md-flex justify-content-between",children:[(0,f.jsxs)("strong",{children:["Liste des entr\xe9es par service de : ",j]}),(0,f.jsxs)(o.u5,{color:"primary",onClick:function(){return e.addEntry()},children:[(0,f.jsx)(u.Z,{icon:d.q,className:"me-2"}),"Ajouter"]})]})}),(0,f.jsxs)(o.sl,{children:[(0,f.jsxs)(o.Sx,{children:[(0,f.jsx)(o.V,{children:(0,f.jsxs)(o.T6,{children:[(0,f.jsx)(o.is,{scope:"col",children:"libelle"}),(0,f.jsx)(o.is,{scope:"col",children:"Quantit\xe9 total"}),(0,f.jsx)(o.is,{scope:"col",children:"Prix unitaire"}),(0,f.jsx)(o.is,{scope:"col",children:"Montant total"})]})}),(0,f.jsx)(o.NR,{children:t&&t.map((function(n,t){return(0,f.jsxs)(o.T6,{children:[(0,f.jsx)(o.NN,{children:n.libelle}),(0,f.jsx)(o.NN,{children:n.sum_quantity}),(0,f.jsx)(o.NN,{children:Number(n.unit_price)>1e3?(0,f.jsxs)(f.Fragment,{children:[Number(n.unit_price).toLocaleString()," Ar"]}):(0,f.jsxs)(f.Fragment,{children:[n.unit_price," Ar"]})}),(0,f.jsx)(o.NN,{children:Number(n.total_amount)>1e3?(0,f.jsxs)(f.Fragment,{children:[Number(n.total_amount).toLocaleString()," Ar"]}):(0,f.jsxs)(f.Fragment,{children:[n.total_amount," Ar"]})}),(0,f.jsx)(o.NN,{children:(0,f.jsx)(o.u5,{color:"light",onClick:function(){return e.entryDetails("",n.libelle,n.customer_id,"findService",n.libelle,"service")},children:"Voir"})}),(0,f.jsx)(o.NN,{children:(0,f.jsx)(o.u5,{color:"light",onClick:function(){return e.reload("none","customer",0,"service")},children:"Retour"})})]},t)}))})]}),(0,f.jsxs)(o.E7,{"aria-label":"Page navigation example",children:[(0,f.jsx)(o.tn,{"aria-label":"Previous",disabled:1===c,onClick:function(){return e.getEntryData(c-1,a)},children:(0,f.jsx)("span",{"aria-hidden":"true",children:"\xab"})}),s.map((function(n,t){return(0,f.jsx)(o.tn,{active:n===c,onClick:function(){return e.getEntryData(n,a)},children:" ".concat(n," ")},t)})),(0,f.jsx)(o.tn,{"aria-label":"Next",disabled:l-c===0||0===t.length,onClick:function(){return e.getEntryData(c+1,a)},children:(0,f.jsx)("span",{"aria-hidden":"true",children:" \xbb "})})]})]})]})})}):"findService"===x?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.rb,{children:(0,f.jsx)(o.b7,{xs:12,children:(0,f.jsxs)(o.xH,{className:"mb-4",children:[(0,f.jsx)(o.bn,{children:(0,f.jsxs)("span",{className:"d-grid gap-2 d-md-flex justify-content-between",children:[(0,f.jsxs)("strong",{children:["D\xe9tails entr\xe9e du service : ",j]}),(0,f.jsxs)(o.u5,{color:"primary",onClick:function(){return e.addEntry()},children:[(0,f.jsx)(u.Z,{icon:d.q,className:"me-2"}),"Ajouter"]})]})}),(0,f.jsxs)(o.sl,{children:[(0,f.jsxs)(o.Sx,{children:[(0,f.jsx)(o.V,{children:(0,f.jsxs)(o.T6,{children:[(0,f.jsx)(o.is,{scope:"col",children:"Date de creation"}),(0,f.jsx)(o.is,{scope:"col",children:"Libelle"}),(0,f.jsx)(o.is,{scope:"col",children:"Quantit\xe9"}),(0,f.jsx)(o.is,{scope:"col",children:"Prix unitaire"}),(0,f.jsx)(o.is,{scope:"col",children:"Montant Total"})]})}),(0,f.jsx)(o.NR,{children:t&&t.map((function(n,t){return(0,f.jsxs)(o.T6,{children:[(0,f.jsx)(o.NN,{children:p()(n.created_date).format("YYYY-MM-DD HH:mm:ss")}),(0,f.jsx)(o.NN,{children:n.libelle}),(0,f.jsx)(o.NN,{children:n.quantity}),(0,f.jsx)(o.NN,{children:Number(n.unit_price)>1e3?(0,f.jsxs)(f.Fragment,{children:[Number(n.unit_price).toLocaleString()," Ar"]}):(0,f.jsxs)(f.Fragment,{children:[n.unit_price," Ar"]})}),(0,f.jsx)(o.NN,{children:Number(n.total_amount)>1e3?(0,f.jsxs)(f.Fragment,{children:[Number(n.total_amount).toLocaleString()," Ar"]}):(0,f.jsxs)(f.Fragment,{children:[n.total_amount," Ar"]})}),"Administrateur"===r?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(o.NN,{children:(0,f.jsx)(o.u5,{color:"danger",onClick:function(){return e.entryToDelete(t)},children:(0,f.jsx)(u.Z,{icon:h.N})})})}):(0,f.jsx)(f.Fragment,{}),(0,f.jsx)(o.NN,{children:(0,f.jsx)(o.u5,{color:"light",onClick:function(){return e.reload("none","customer",0,"service")},children:"Retour"})})]},t)}))})]}),(0,f.jsxs)(o.E7,{"aria-label":"Page navigation example",children:[(0,f.jsx)(o.tn,{"aria-label":"Previous",disabled:1===c,onClick:function(){return e.getEntryData(c-1,a)},children:(0,f.jsx)("span",{"aria-hidden":"true",children:"\xab"})}),s.map((function(n,t){return(0,f.jsx)(o.tn,{active:n===c,onClick:function(){return e.getEntryData(n,a)},children:" ".concat(n," ")},t)})),(0,f.jsx)(o.tn,{"aria-label":"Next",disabled:l-c===0||t&&0===t.length,onClick:function(){return e.getEntryData(c+1,a)},children:(0,f.jsx)("span",{"aria-hidden":"true",children:" \xbb "})})]})]})]})})}),(0,f.jsxs)(o.Tk,{alignment:"center",visible:y,onClose:function(){return e.setDeleteModalState(!1)},children:[(0,f.jsx)(o.p0,{children:(0,f.jsx)(o.fl,{children:"Supprimer"})}),(0,f.jsx)(o.sD,{children:(0,f.jsxs)("p",{children:["Voulez vous supprimer"," ",t&&t.length>0&&g<t.length&&t[g].libelle,"?"]})}),(0,f.jsxs)(o.Ym,{children:[(0,f.jsx)(o.u5,{color:"secondary",onClick:function(){return e.setDeleteModalState(!1)},children:"Annuler"}),(0,f.jsx)(o.u5,{color:"danger",onClick:function(){return e.deleteEntry()},children:"Supprimer"})]})]})]}):(0,f.jsx)(f.Fragment,{})})}},{key:"setLoading",value:function(e){this.setState({loading:e})}},{key:"setOption",value:function(e){this.setState({option:e})}},{key:"setCustomer",value:function(e){this.setState({customer:e})}},{key:"setRole",value:function(e){this.setState({role:e})}},{key:"setId",value:function(e){this.setState({id:e})}},{key:"setDeleteModalState",value:function(e){this.setState({deleteModalState:e})}}]),t}(c.Component)},2439:function(e,n,t){t.d(n,{q:function(){return r}});var r=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='440 240 272 240 272 72 240 72 240 240 72 240 72 272 240 272 240 440 272 440 272 272 440 272 440 240' class='ci-primary'/>"]},2800:function(e,n,t){t.d(n,{N:function(){return r}});var r=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M96,472a23.82,23.82,0,0,0,23.579,24H392.421A23.82,23.82,0,0,0,416,472V152H96Zm32-288H384V464H128Z' class='ci-primary'/><rect width='32' height='200' x='168' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='240' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><rect width='32' height='200' x='312' y='216' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M328,88V40c0-13.458-9.488-24-21.6-24H205.6C193.488,16,184,26.542,184,40V88H64v32H448V88ZM216,48h80V88H216Z' class='ci-primary'/>"]},5785:function(e,n,t){function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"===typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}t.d(n,{Z:function(){return i}})}}]);
//# sourceMappingURL=975.35f0f12c.chunk.js.map